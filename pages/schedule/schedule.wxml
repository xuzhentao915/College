<view class="container schedule-container">
  <!-- ===== æ˜ŸæœŸé€‰æ‹©å™¨ (Fixed) ===== -->
  <view class="week-bar">
    <view
      class="week-item {{selectedDay === index ? 'week-active' : ''}}"
      wx:for="{{weekDays}}"
      wx:key="*this"
      bindtap="selectDay"
      data-index="{{index}}">
      <text class="week-label">{{item}}</text>
      <view class="week-dot" wx:if="{{courses[index] && courses[index].length > 0}}"></view>
    </view>
  </view>

  <!-- ===== è¯¾ç¨‹åˆ—è¡¨ ===== -->
  <view class="schedule-body">
    <block wx:if="{{courses[selectedDay] && courses[selectedDay].length > 0}}">
      <view class="timeline">
        <view class="timeline-item" wx:for="{{courses[selectedDay]}}" wx:key="id">
          <!-- æ—¶é—´è½´èŠ‚ç‚¹ -->
          <view class="timeline-node" style="border-color: {{item.color}};">
            <view class="node-dot" style="background: {{item.color}};"></view>
          </view>
          <!-- è¿æ¥çº¿ -->
          <view class="timeline-line" wx:if="{{index < courses[selectedDay].length - 1}}"></view>
          <!-- è¯¾ç¨‹å¡ -->
          <view class="schedule-card" style="border-left: 6rpx solid {{item.color}};">
            <view class="sc-header flex-row justify-between">
              <text class="sc-name font-md font-bold text-main">{{item.name}}</text>
              <view class="sc-time-badge flex-center" style="background: {{item.color}}20; color: {{item.color}};">
                <text class="font-num font-xs font-bold">{{item.startTime}}</text>
              </view>
            </view>
            <view class="sc-footer flex-row gap-md" style="margin-top: 12rpx;">
              <text class="font-xs text-secondary">ğŸ“ {{item.room}}</text>
              <text class="font-xs text-secondary">ğŸ‘¤ {{item.teacher}}</text>
              <text class="font-xs text-hint">{{item.startTime}} - {{item.endTime}}</text>
            </view>
          </view>
        </view>
      </view>
    </block>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:else class="empty-day flex-col flex-center">
      <text style="font-size: 100rpx; margin-bottom: 24rpx;">ğŸ˜´</text>
      <text class="font-md text-secondary" style="font-weight: 500;">ä»Šå¤©æ²¡æœ‰è¯¾å“¦</text>
      <text class="font-xs text-hint" style="margin-top: 8rpx;">å¥½å¥½äº«å—ä¼‘æ¯æ—¶å…‰å§</text>
    </view>
  </view>
</view>
