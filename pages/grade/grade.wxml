<view class="page-container grade-page">
  <!-- 动态顶部适配 (固定) -->
  <view style="height: {{navHeight}}px; width: 100%; flex-shrink: 0;"></view>

  <!-- ===== GPA 头部看板 (固定) ===== -->
  <view class="gpa-hero-wrap">
    <view class="gpa-hero">
      <view class="semester-pill">
        <picker bindchange="bindPickerChange" value="{{index}}" range="{{semesters}}">
          <view class="picker-inner flex-row gap-8">
            <text>{{semesters[index]}}</text>
            <text style="font-size: 18rpx;">▼</text>
          </view>
        </picker>
      </view>
      
      <view class="gpa-display">
        <text class="gpa-number font-num">{{gpa}}</text>
        <view class="gpa-sub font-bold">AVG GPA</view>
      </view>
      
      <!-- 装饰球 -->
      <view class="gpa-deco gpa-deco-1"></view>
      <view class="gpa-deco gpa-deco-2"></view>
    </view>
  </view>

  <!-- 列表标题 (固定) -->
  <view class="grade-list-header flex-row justify-between">
    <text class="title-text">成绩清单</text>
    <text class="text-xs" style="color: var(--text-300);">共 {{grades.length}} 门课程</text>
  </view>

  <!-- ===== 成绩明细列表 (可滚动) ===== -->
  <scroll-view scroll-y class="grade-scroll-area" enhanced show-scrollbar="{{false}}">
    <view class="grade-list-inner">
      <view class="grade-card" wx:for="{{grades}}" wx:key="id">
        <view class="gc-left">
          <text class="gc-name">{{item.name}}</text>
          <view class="gc-tags">
            <text class="gc-tag">{{item.type}}</text>
            <text class="gc-credit font-num">{{item.credit}} Credits</text>
          </view>
        </view>
        
        <view class="gc-right">
          <view class="score-box">
            <text class="score-val font-num {{item.score >= 90 ? 'score-high' : (item.score < 60 ? 'score-low' : 'score-mid')}}">{{item.score}}</text>
            <text class="point-val font-num">GP {{item.point}}</text>
          </view>
        </view>
      </view>
      <!-- 列表底部留白 -->
      <view style="height: 40rpx;"></view>
    </view>
  </scroll-view>
</view>
